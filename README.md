# Lenze_ST17H26_开发入门指南
> 作者：杨琪  
> 说明：本文旨在指导用户创建ST17H26的工程环境并通过一个简单的工程说明如何使用ST17H26开发，包括环境配置、程序编译、调试、固件下载、芯片烧录。

# 目录
* [1 开发IDE](#1开发IDE)  
  * [1.1 下载](#11下载)
  * [1.2 使用注意](#12使用注意)
* [2 开发文档](#2开发文档)
  * [2.1 文档使用指南](#21文档使用指南)
  * [2.2 特别注意](#22特别注意)
* [3 开发板](#3开发板)  
  * [3.1 原理图及PCB文件](#31原理图及PCB文件)
  * [3.2 资源介绍](#32资源介绍)
  * [3.3 程序下载](#33程序下载)

## 1 开发IDE
### 1.1 下载
- 下载链接[LenzeIDE](http://pan.baidu.com/s/1eRVLWbg)
- 密码：c16i
### 1.2 使用注意
1. 工程路径不要包含中文字符，工程文件夹不要超过5级深度，工程名不要过长；  
2. 编译信息在下方“console”栏，这里会出现提示和报错；

## 2 开发文档
### 2.1文档使用指南
- 资料目录介绍：  
  * 1，ST17H26开发套件入门：介绍ST17H26开发套件及调试程序下载；
  * 2，ST17H26开发板原理图及PCB：ST17H26开发板EVB板的原理图及PCB 文件，开发需要查看跳线帽的引脚接线；
  * 3，ST17H26参考资料:
    * 1，ST17H26芯片手册
    * 2.1，SDK开发手册:BLE开发的相关知识讲解；
    * 2.2, 提供的SDK的部分代码注释讲解；
    * 3.1，引脚唤醒的种类及方式；
    * 3.2，SDK里面系统进入休眠的函数；
    * 4，SDK底层API接口介绍
  * 4，ST17H26开发应用
    * 1，HID开发：HID设备开发中服务介绍，和按键键值的讲解；
    * 2，GATT开发：以防丢器为例讲解GATT开发，以及GATT开发的手机测试app的使用；
    * 3，工程SDK注释：工程中ui.c,app_att.c,ui_led_pwm.c这几个文件的注释及说明；
    * 4，应用文档：按键的单击双击长按的应用，PWM，ADC的讲解，GATT的服务列表讲解；
  * 5，ST17H26芯片烧录：程序在EVB开发板调试完成后烧录OTP芯片
    * 1，EVK烧录板引脚接线图；
    * 2，烧录包文件；
    * 3，烧录步骤指南；
  * 6，蓝牙相关：包含蓝牙相关技术文档
  * 7，FAQ:持续更新开发过程中的问题。
### 2.2特别注意
  1. 对于此前没有蓝牙相关开发经验的工程师，建议对文档 ST17H26资料\3，ST17H26参考资料\2.1ST17H26_BLE SDK开发手册 中第3章蓝牙相关基初知识有一个大概了解，例如状态机，广播参数等，这些参数在工程修改中有较大意义。
  2. 在功耗敏感型产品开发中，低功耗的处理比较重要，需要区分清蓝牙deepsleep&suspend这两种状态及唤醒源和设置。

## 3开发板
### 3.1原理图及PCB文件
1. 功耗测量：将电流表串联在跳线帽JM21之间，静态测量的数值需要减去10ua(班上FLASH芯片功耗)，即为ST17H26的休眠静态功耗。
### 3.2资源介绍
1. ST17H38所有引脚都引出，与ST17H26Pin对Pin兼容；
2. JM11、JM14为GP5&GP7,与IC左上角LED灯连接；
3. 右侧有两组各4路共阴共阳LED指示灯；
4. JM3连接GP18与开关SW4(高电平)和SW5(低电平)连接，
   JM6连接GP17与按键SW7(高电平)和SW8(低电平)连接，开发时可用作唤醒源；
5. 开发板右上角是无源蜂鸣器驱动部分，使用时将引脚接线到JM4,需要使用PWM驱动；
### 3.3程序下载
1. 资源文件 ST17H26资料\1，ST17H26开发套件入门\2，ST17H26开发板仿真程序下载 里面有详细的步骤。
2. 下载失败及解决办法
   1. 程序下载之前需要ResetMCU,如果没有复位成功则无法下载程序；
   2. 在工程里设置了唤醒源，烧录一次后下次烧录需要按照上次程序里的唤醒源唤醒MCU，这时Reset即可成功。如果工程里面设置唤醒源不正确导致无法复位，按住MCU左上角FLASH芯片的复位按键（注意区分：大按键时MCU的复位按键，小按键是FLASH复位按键），按住按键同时给开发板断电然后上电，即可成功复位MCU。
